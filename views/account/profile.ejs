<h1 class="page-header">Your profile</h1>
<div class="row">
  <div class="col-sm-3"> <!-- required for floating -->
      <!-- Nav tabs -->
      <ul class="nav nav-tabs tabs-left tabs-vertical">
        <li class="active"><a href="#details" data-toggle="tab">Your details</a></li>
        <li><a href="#changePassword" data-toggle="tab">Change password</a></li>
        <li><a href="#deleteAccount" data-toggle="tab">Delete account</a></li>
      </ul>
  </div>
  <div class="col-sm-9">  
    <div class="row">
      <div class="col-sm-7">
        <!-- Tab panes -->
        <div class="tab-content tabs-vertical">
          <div class="tab-pane active" id="details">
            <h2>Your details</h2>
            <br/>
            <form action="/account/profile" method="post" class="form-horizontal" data-validator="true">
              <div class="messages"></div>
              <input type="hidden" name="_csrf" value="<%= _csrf %>">
              <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Email</label>
                <div class="col-sm-7">
                  <input type="email" name="email" id="email" value="<%= (user.email.match(/\@unverified$/g)) ? '' : user.email %>" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label for="name" class="col-sm-3 control-label">Name</label>
                <div class="col-sm-7">
                  <input type="text" name="name" id="name" value="<%= user.profile.name %>" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label for="Gender" class="col-sm-3 control-label">Organization</label>
                <div class="col-sm-7">
                  <input type="text" name="organization" id="organization" value="<%= user.profile.organization %>" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label for="location" class="col-sm-3 control-label">Location</label>
                <div class="col-sm-7">
                  <input type="text" name="location" id="location" value="<%= user.profile.location %>" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label for="website" class="col-sm-3 control-label">Website</label>
                <div class="col-sm-7">
                  <input type="text" name="website" id="website" value="<%= user.profile.website %>" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-3 col-sm-7">
                  <button type="submit" class="btn btn btn-primary">Save changes</button>
                </div>
              </div>
            </form>
          </div>

          <div class="tab-pane" id="changePassword">
            <h2>Change your password</h2>
            <br/>
            <form action="/account/password" method="post" class="form-horizontal" data-validator="true">
              <div class="messages"></div>
              <input type="hidden" name="_csrf" value="<%= _csrf %>">
              <div class="form-group">
                <label for="password" class="col-sm-4 control-label">New password</label>
                <div class="col-sm-5">
                  <input type="password" name="password" id="password" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label for="confirmPassword" class="col-sm-4 control-label">Confirm password</label>
                <div class="col-sm-5">
                  <input type="password" name="confirmPassword" id="confirmPassword" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-4 col-sm-4">
                  <button type="submit" class="btn btn btn-primary">Change password</button>
                </div>
              </div>
            </form>
          </div>

          <div class="tab-pane" id="deleteAccount">          
            <h2>Delete your account</h2>
            <br/>
            <p>
              You can delete your account at any time. If an account is deleted it cannot be restored.
            </p>
            <br/>
            <p>
              <a href="#" data-toggle="modal" data-target="#deleteAccountModal" class="btn btn-danger"><i class="fa fa-lg fa-fw fa-trash"></i> Delete this account</a>
            </p>
          </div>
          
        </div>  <!-- End tabs -->      
      </div>

      <div class="col-sm-5">

        <p class="text-center">
          <img src="<%= user.gravatar(200) %>" class="img-circle">
        </p>
        <p class="text-center">
          <small>&nbsp; You can change your avatar at <a target="_blank" href="http://gravatar.com"><i class="fa fa-lg fa-external-link"></i> gravatar.com</a></small>
        </p>
        
        <br/>

        <% // @todo Don't show unlink options if a password isn't set and/or email isn't verified %>
        <h4>Verify your identity</h4>
        <p><strong>Tip!</strong> Verifying your identity allows you to log in even if you lose access to your email account.</p>
        
        <br/>
        
        <!-- Connected accounts -->
        <% if (user.facebook) { %>
          <p class="text-success clearfix">
            <i class="fa fa-lg fa-fw fa-check-circle"></i> Facebook
            <a href="/account/unlink/facebook" class="pull-right btn btn-sm btn-default"><i class="fa fa-lg fa-fw fa-unlink"></i> Unlink</a>            
          </p>
        <% } %>
        <% if (user.google) { %>
        <p class="text-success clearfix">
          <i class="fa fa-lg fa-fw fa-check-circle"></i> Google
          <a href="/account/unlink/google" class="pull-right btn btn-sm btn-default"><i class="fa fa-lg fa-fw fa-unlink"></i> Unlink</a>            
        </p>
        <% } %>
        <% if (user.twitter) { %>
        <p class="text-success clearfix">
          <i class="fa fa-lg fa-fw fa-check-circle"></i> Twitter
          <a href="/account/unlink/twitter" class="pull-right btn btn-sm btn-default"><i class="fa fa-lg fa-fw fa-unlink"></i> Unlink</a>            
        </p>
        <% } %>
        <% if (user.github) { %>
        <p class="text-success clearfix">
          <i class="fa fa-lg fa-fw fa-check-circle"></i> GitHub
          <a href="/account/unlink/github" class="pull-right btn btn-sm btn-default"><i class="fa fa-lg fa-fw fa-unlink"></i> Unlink</a>            
        </p>
        <% } %>
        
        <!-- Unconnected accounts -->
        <% if (!user.facebook) { %>
        <p>
          <a href="/auth/facebook" class="btn btn-block btn-default"><i class="fa fa-lg fa-fw fa-facebook"></i> Connect to Facebook</a>
        </p>
        <% } %>
        <% if (!user.google) { %>
        <p>
          <a href="/auth/google" class="btn btn-block btn-default"><i class="fa fa-lg fa-fw fa-google"></i> Connect to Google</a>
        </p>
        <% } %>
        <% if (!user.twitter) { %>
        <p>
          <a href="/auth/twitter" class="btn btn-block btn-default"><i class="fa fa-lg fa-fw fa-twitter"></i> Connect to Twitter</a>
        </p>
        <% } %>
        <% if (!user.github) { %>
          <p>
            <a href="/auth/github" class="btn btn-block btn-default"><i class="fa fa-lg fa-fw fa-github"></i> Connect to GitHub</a>
          </p>
        <% } %>
      </div>
        
    </div>
  </div>
</div>





<div class="modal fade" id="deleteAccountModal" tabindex="-1" role="dialog" aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="deleteAccountModalLabel">Confirm account deletion</h4>
      </div>
      <div class="modal-body">
        <br/>
        <p class="lead">
          <strong><i class="fa fa-lg fa-warning"></i> Warning</strong> If you delete your account, it cannot be restored.
        </p>
        <br/>
      </div>
      <div class="modal-footer">
        <form name="delete-account" method="post" action="/account/delete">
          <input type="hidden" name="_csrf" value="<%= _csrf %>">
          <button type="submit" class="btn btn-danger"><i class="fa fa-fw fa-lg fa-trash"></i> CONFIRM ACCOUNT DELETION</button>
        </form>
      </div>
    </div>        
</div>